<!DOCTYPE html>
<meta charset="utf-8">
<body>
<script src="//d3js.org/d3.v3.min.js"></script>
<script>

// SIMPLIFIED NON-WORKING CODE -- what is the minimum to work?

var width = 960, height = 500;

// x.y.z().w()
var voronoi = d3.geom.voronoi().clipExtent([[0, 0], [width, height]]);

var canvas = d3.select("body").append("canvas")
    .attr("width", width)
    .attr("height", height);

var context = canvas.node().getContext("2d");

var image = new Image;
image.src = "starry-night.jpg";
image.onload = start;

function start() {
  context.drawImage(image, 0, 0);
  image = context.getImageData(0, 0, width, height);
}

</script>
